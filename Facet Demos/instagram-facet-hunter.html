<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Facets | Hunter Mode</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        :root {
            --bg-primary: #000;
            --bg-card: #0a0a0a;
            --text-primary: #fff;
            --text-secondary: #8e8e8e;
            --text-muted: #555;
            --accent: #fe2c55;
            --accent-green: #12A66F;
            --accent-blue: #0095f6;
            --accent-orange: #ff7a00;
            --glass: rgba(255,255,255,0.08);
            --glass-border: rgba(255,255,255,0.12);
        }

        html, body {
            height: 100%;
            overflow: hidden;
            background: var(--bg-primary);
            font-family: -apple-system, BlinkMacSystemFont, 'SF Pro Display', 'Segoe UI', Roboto, sans-serif;
            color: var(--text-primary);
        }

        /* Mobile-first phone frame */
        .phone-frame {
            width: 100%;
            height: 100%;
            max-width: 390px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            background: var(--bg-primary);
        }

        @media (min-width: 500px) {
            body {
                display: flex;
                align-items: center;
                justify-content: center;
                background: #111;
                padding: 20px;
            }
            .phone-frame {
                max-height: 844px;
                border-radius: 44px;
                border: 6px solid #1a1a1a;
                box-shadow: 0 30px 60px rgba(0,0,0,0.6), inset 0 0 0 2px #333;
            }
        }

        /* Status bar */
        .status-bar {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 24px;
            z-index: 200;
            font-size: 14px;
            font-weight: 600;
        }
        .status-bar .time { letter-spacing: 0.5px; }
        .status-bar .icons { display: flex; gap: 4px; align-items: center; }
        .status-bar .icons svg { width: 18px; height: 18px; }

        /* Header */
        .header {
            position: absolute;
            top: 44px;
            left: 0;
            right: 0;
            z-index: 100;
            padding: 8px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: linear-gradient(to bottom, rgba(0,0,0,0.8) 0%, transparent 100%);
        }
        .header-title {
            font-size: 18px;
            font-weight: 700;
            letter-spacing: -0.3px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .header-title .mode {
            font-size: 10px;
            font-weight: 600;
            background: var(--accent-green);
            padding: 2px 6px;
            border-radius: 4px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        /* Reels container */
        .reels-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            transition: transform 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        .reel {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            opacity: 0;
            transform: translateY(100%);
            transition: all 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }
        .reel.active {
            opacity: 1;
            transform: translateY(0);
        }
        .reel.prev {
            opacity: 0;
            transform: translateY(-100%);
        }

        /* Hunter-style metric card */
        .reel-content {
            position: relative;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 80px 20px 140px;
        }

        /* Category tag */
        .category-tag {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            background: var(--glass);
            border: 1px solid var(--glass-border);
            backdrop-filter: blur(10px);
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--text-secondary);
            margin-bottom: 16px;
            width: fit-content;
        }
        .category-tag .dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
        }
        .category-tag.action .dot { background: var(--accent); }
        .category-tag.info .dot { background: var(--accent-blue); }
        .category-tag.delivery .dot { background: var(--accent-green); }
        .category-tag.news .dot { background: var(--accent-orange); }

        /* Primary metric (Hunter: bottom line first) */
        .primary-metric {
            font-size: 56px;
            font-weight: 800;
            letter-spacing: -3px;
            line-height: 1;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #fff 0%, #aaa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .primary-metric.money { color: var(--accent-green); -webkit-text-fill-color: var(--accent-green); }
        .primary-metric.alert { color: var(--accent); -webkit-text-fill-color: var(--accent); }

        /* Headline */
        .headline {
            font-size: 22px;
            font-weight: 700;
            line-height: 1.25;
            letter-spacing: -0.5px;
            margin-bottom: 12px;
            max-width: 320px;
        }

        /* Secondary text (Hunter: minimal) */
        .secondary-text {
            font-size: 14px;
            color: var(--text-secondary);
            line-height: 1.4;
            max-width: 300px;
        }

        /* Timestamp */
        .timestamp {
            font-size: 12px;
            color: var(--text-muted);
            margin-top: 12px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .timestamp::before {
            content: '';
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: var(--text-muted);
        }

        /* Source attribution (tap to expand) */
        .source-panel {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 16px 20px;
            padding-bottom: calc(16px + env(safe-area-inset-bottom, 20px));
            background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.8) 50%, transparent 100%);
        }

        .source-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
        }
        .source-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #833ab4 0%, #fd1d1d 50%, #fcb045 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 700;
        }
        .source-info {
            flex: 1;
        }
        .source-name {
            font-size: 13px;
            font-weight: 600;
        }
        .source-type {
            font-size: 11px;
            color: var(--text-secondary);
        }

        /* Expandable caption */
        .caption {
            font-size: 14px;
            line-height: 1.45;
            color: var(--text-primary);
            max-height: 42px;
            overflow: hidden;
            transition: max-height 0.3s ease;
            cursor: pointer;
        }
        .caption.expanded {
            max-height: 300px;
        }
        .caption .more {
            color: var(--text-secondary);
            font-weight: 500;
        }

        /* Truth anchor (Facets differentiator) */
        .truth-anchor {
            margin-top: 12px;
            padding: 10px 12px;
            background: rgba(18, 166, 111, 0.1);
            border: 1px solid rgba(18, 166, 111, 0.3);
            border-radius: 8px;
            display: none;
        }
        .caption.expanded + .truth-anchor,
        .truth-anchor.visible {
            display: block;
        }
        .truth-anchor-label {
            font-size: 10px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: var(--accent-green);
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        .truth-anchor-label::before {
            content: 'âœ“';
            font-size: 10px;
        }
        .truth-excerpt {
            font-size: 12px;
            color: var(--text-secondary);
            font-style: italic;
            line-height: 1.4;
        }
        .truth-meta {
            font-size: 10px;
            color: var(--text-muted);
            margin-top: 6px;
            display: flex;
            gap: 12px;
        }

        /* Action buttons (right side) */
        .actions {
            position: absolute;
            right: 12px;
            bottom: 160px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            z-index: 50;
        }
        .action-btn {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            cursor: pointer;
            transition: transform 0.15s ease;
        }
        .action-btn:active {
            transform: scale(0.9);
        }
        .action-btn .icon {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .action-btn .icon svg {
            width: 24px;
            height: 24px;
            fill: #fff;
        }
        .action-btn .count {
            font-size: 11px;
            font-weight: 600;
        }

        /* Progress indicators */
        .progress-dots {
            position: absolute;
            right: 8px;
            top: 50%;
            transform: translateY(-50%);
            display: flex;
            flex-direction: column;
            gap: 6px;
            z-index: 100;
        }
        .progress-dot {
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: rgba(255,255,255,0.3);
            transition: all 0.2s ease;
        }
        .progress-dot.active {
            background: #fff;
            height: 16px;
            border-radius: 2px;
        }

        /* Swipe hint */
        .swipe-hint {
            position: absolute;
            bottom: 200px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            opacity: 0.6;
            animation: pulse 2s ease-in-out infinite;
            z-index: 50;
        }
        .swipe-hint.hidden { display: none; }
        .swipe-hint svg {
            width: 24px;
            height: 24px;
            fill: #fff;
            animation: bounce 1.5s ease-in-out infinite;
        }
        .swipe-hint span {
            font-size: 11px;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
        }
        @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 0.3; }
        }
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        /* Loading state */
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
        }
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--glass);
            border-top-color: var(--accent-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .loading-text {
            font-size: 13px;
            color: var(--text-secondary);
        }
    </style>
</head>
<body>
    <div class="phone-frame">
        <!-- Status bar -->
        <div class="status-bar">
            <span class="time">1:47</span>
            <div class="icons">
                <svg viewBox="0 0 24 24"><path fill="#fff" d="M12 21c-4.97 0-9-4.03-9-9s4.03-9 9-9 9 4.03 9 9-4.03 9-9 9zm0-16c-3.86 0-7 3.14-7 7s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7z"/><path fill="#fff" d="M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4z"/></svg>
                <svg viewBox="0 0 24 24"><path fill="#fff" d="M2 9h3v12H2V9zm6.5-5h3v17h-3V4zM15 13h3v8h-3v-8zm6.5-4h3v12h-3V9z"/></svg>
                <svg viewBox="0 0 24 24"><path fill="#fff" d="M17 4h-3V2h-4v2H7v18h10V4z"/></svg>
            </div>
        </div>

        <!-- Header -->
        <div class="header">
            <div class="header-title">
                Facets
                <span class="mode">Hunter</span>
            </div>
            <div style="font-size: 11px; color: var(--text-secondary);">Gmail Summary</div>
        </div>

        <!-- Reels container -->
        <div class="reels-container" id="reelsContainer">
            <!-- Reels will be injected here -->
        </div>

        <!-- Progress dots -->
        <div class="progress-dots" id="progressDots"></div>

        <!-- Swipe hint -->
        <div class="swipe-hint" id="swipeHint">
            <svg viewBox="0 0 24 24"><path fill="#fff" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"/></svg>
            <span>Swipe up</span>
        </div>
    </div>

    <script>
        // Gmail data injected from Claude analysis (Hunter pattern: metrics first)
        const facetData = [
            {
                category: "action",
                categoryLabel: "Action Required",
                metric: "Jan 16",
                headline: "cdCon Program Committee",
                secondary: "Share availability for week of Feb 2",
                source: {
                    name: "Roxanne Joncas",
                    type: "Linux Foundation",
                    avatar: "RJ"
                },
                caption: "First meeting poll deadline. Tracy and Roxanne coordinating 2026 cdCon program.",
                truthAnchor: {
                    excerpt: "Please share your availability for the week of February 2. Fill out the poll by January 16.",
                    docId: "cdCon Program Committee Meeting [Poll]",
                    confidence: 0.98
                },
                timestamp: "Jan 9, 5:41 PM"
            },
            {
                category: "delivery",
                categoryLabel: "Delivered",
                metric: "âœ“",
                headline: "Dog Nail Grinder",
                secondary: "Left near front door/porch",
                source: {
                    name: "Amazon",
                    type: "Order Update",
                    avatar: "A"
                },
                caption: "Dog Nail Grinder with 2 LED Lights. Order #112-8236451-5564238.",
                truthAnchor: {
                    excerpt: "Your package was left near the front door or porch.",
                    docId: "Amazon Delivery Confirmation",
                    confidence: 1.0
                },
                timestamp: "Jan 10, 12:05 AM"
            },
            {
                category: "info",
                categoryLabel: "Order",
                metric: "$78.75",
                headline: "Round Table Pizza",
                secondary: "DoorDash â€¢ ETA 6:05-6:24 PM",
                source: {
                    name: "DoorDash",
                    type: "Order Confirmation",
                    avatar: "D"
                },
                caption: "1892 Marquette Rd, Chula Vista. Paid with Visa â€¢4125.",
                truthAnchor: {
                    excerpt: "Estimated delivery time for your order is 6:05 PM - 6:24 PM.",
                    docId: "DoorDash Order Confirmation",
                    confidence: 1.0
                },
                timestamp: "Jan 10, 1:18 AM"
            },
            {
                category: "info",
                categoryLabel: "Investment",
                metric: "KRAK",
                headline: "Kraken on EquityZen",
                secondary: "Pre-IPO opportunity â€¢ S-1 filed Nov '25",
                source: {
                    name: "EquityZen",
                    type: "New Offering",
                    avatar: "EZ"
                },
                caption: "Kraken acquired NinjaTrader, Small Exchange, Capitalise.ai, Breakout in 2025. Deutsche BÃ¶rse partnership. xStocks: $1B+ on-chain transactions.",
                truthAnchor: {
                    excerpt: "In November 2025, Kraken announced it had confidentially submitted a draft registration statement on Form S-1 with the SEC.",
                    docId: "Kraken Now Available on EquityZen",
                    confidence: 0.95
                },
                timestamp: "Jan 9, 2:01 PM"
            },
            {
                category: "news",
                categoryLabel: "Local News",
                metric: "3",
                headline: "San Diego Headlines",
                secondary: "Balboa Park parking â€¢ UCSD +831 students â€¢ Teachers strike",
                source: {
                    name: "SD Union-Tribune",
                    type: "Essential San Diego",
                    avatar: "SD"
                },
                caption: "Mayor Gloria defends Balboa Park paid parking. UCSD enrollment breaks 45K. One-day teacher strike would shutter schools.",
                truthAnchor: {
                    excerpt: "The La Jolla campus added 831 students, pushing enrollment above the 45,000 mark for the first time.",
                    docId: "Essential San Diego Newsletter",
                    confidence: 0.92
                },
                timestamp: "Jan 9, 9:08 AM"
            }
        ];

        // Render reels
        const container = document.getElementById('reelsContainer');
        const progressDots = document.getElementById('progressDots');
        let currentIndex = 0;

        function renderReels() {
            container.innerHTML = '';
            progressDots.innerHTML = '';

            facetData.forEach((item, index) => {
                // Create reel
                const reel = document.createElement('div');
                reel.className = `reel ${index === 0 ? 'active' : ''}`;
                
                const metricClass = item.category === 'info' && item.metric.includes('$') ? 'money' : 
                                    item.category === 'action' ? 'alert' : '';

                reel.innerHTML = `
                    <div class="reel-content">
                        <div class="category-tag ${item.category}">
                            <span class="dot"></span>
                            ${item.categoryLabel}
                        </div>
                        <div class="primary-metric ${metricClass}">${item.metric}</div>
                        <div class="headline">${item.headline}</div>
                        <div class="secondary-text">${item.secondary}</div>
                        <div class="timestamp">${item.timestamp}</div>
                    </div>
                    
                    <div class="actions">
                        <div class="action-btn">
                            <div class="icon">
                                <svg viewBox="0 0 24 24"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
                            </div>
                        </div>
                        <div class="action-btn">
                            <div class="icon">
                                <svg viewBox="0 0 24 24"><path d="M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18z"/></svg>
                            </div>
                        </div>
                        <div class="action-btn">
                            <div class="icon">
                                <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                            </div>
                        </div>
                    </div>
                    
                    <div class="source-panel">
                        <div class="source-header">
                            <div class="source-avatar">${item.source.avatar}</div>
                            <div class="source-info">
                                <div class="source-name">${item.source.name}</div>
                                <div class="source-type">${item.source.type}</div>
                            </div>
                        </div>
                        <div class="caption" onclick="this.classList.toggle('expanded')">${item.caption} <span class="more">...more</span></div>
                        <div class="truth-anchor">
                            <div class="truth-anchor-label">Source Verified</div>
                            <div class="truth-excerpt">"${item.truthAnchor.excerpt}"</div>
                            <div class="truth-meta">
                                <span>ðŸ“„ ${item.truthAnchor.docId}</span>
                                <span>ðŸŽ¯ ${Math.round(item.truthAnchor.confidence * 100)}%</span>
                            </div>
                        </div>
                    </div>
                `;
                
                container.appendChild(reel);

                // Create progress dot
                const dot = document.createElement('div');
                dot.className = `progress-dot ${index === 0 ? 'active' : ''}`;
                progressDots.appendChild(dot);
            });
        }

        function goToReel(index) {
            if (index < 0 || index >= facetData.length) return;
            
            const reels = document.querySelectorAll('.reel');
            const dots = document.querySelectorAll('.progress-dot');
            
            reels.forEach((reel, i) => {
                reel.classList.remove('active', 'prev');
                if (i === index) reel.classList.add('active');
                if (i < index) reel.classList.add('prev');
            });
            
            dots.forEach((dot, i) => {
                dot.classList.toggle('active', i === index);
            });
            
            currentIndex = index;
            
            // Hide swipe hint after first interaction
            document.getElementById('swipeHint').classList.add('hidden');
        }

        // Touch handling
        let touchStartY = 0;
        let touchEndY = 0;

        document.addEventListener('touchstart', e => {
            touchStartY = e.changedTouches[0].screenY;
        }, { passive: true });

        document.addEventListener('touchend', e => {
            touchEndY = e.changedTouches[0].screenY;
            handleSwipe();
        }, { passive: true });

        function handleSwipe() {
            const diff = touchStartY - touchEndY;
            if (Math.abs(diff) > 50) {
                if (diff > 0) {
                    goToReel(currentIndex + 1);
                } else {
                    goToReel(currentIndex - 1);
                }
            }
        }

        // Keyboard navigation
        document.addEventListener('keydown', e => {
            if (e.key === 'ArrowUp' || e.key === 'k') {
                goToReel(currentIndex - 1);
            } else if (e.key === 'ArrowDown' || e.key === 'j') {
                goToReel(currentIndex + 1);
            }
        });

        // Mouse wheel
        let wheelTimeout;
        document.addEventListener('wheel', e => {
            clearTimeout(wheelTimeout);
            wheelTimeout = setTimeout(() => {
                if (e.deltaY > 0) {
                    goToReel(currentIndex + 1);
                } else {
                    goToReel(currentIndex - 1);
                }
            }, 50);
        }, { passive: true });

        // Initialize
        renderReels();
    </script>
</body>
</html>
